<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>Olympus Aether Network Facility Simulator</title>
    <style>
        :root {
            --cyan: #00f2ff;
            --gold: #d4af37;
            --purple-shader: rgba(26, 0, 51, 0.82);
            --glass: rgba(8, 8, 25, 0.45);
            --border: rgba(0, 242, 255, 0.35);
            --glow-c: 0 0 40px rgba(0, 242, 255, 0.75);

            /* Label Colors */
            --c-land: #00D2FF; --c-factory: #A259FF; --c-warehouse: #FFF5E1;
            --c-units: #FF4B2B; --c-companies: #00FF87;
        }

        * { margin:0; padding:0; box-sizing:border-box; }
        body, html { 
            width:100%; height:100%; overflow:hidden; 
            background:#000; font-family: 'Courier New', monospace; 
            color:var(--cyan); touch-action: manipulation; 
        }

        /* Rain Effect */
        #rain-container { position: fixed; inset: 0; z-index: 1; pointer-events: none; }
        .drop { 
            position: absolute; background: linear-gradient(transparent, var(--cyan)); 
            width: 1.5px; height: 60px; top: -80px; 
            animation: fall linear infinite; opacity: 0.25; 
        }
        @keyframes fall { to { transform: translateY(110vh); } }

        /* Main UI */
        #container { 
            position: relative; z-index: 10; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            height: 100vh; text-align: center; padding: 16px; 
        }

        /* Bottom Icon Panel */
        #icon-panel { 
            position: fixed; bottom: 0; left: 0; right: 0; height: 60px; background: rgba(0, 0, 0, 0.8);
            display: flex; justify-content: center; align-items: center; gap: 40px; z-index: 100;
        }
        .icon { cursor: pointer; font-size: 24px; color: #00d4ff; }
        .icon:hover { color: #ffffff; }

        /* Glass Holoframe Modals */
        .holo-modal { 
            display: none; position: fixed; top: 10%; left: 50%; transform: translateX(-50%); width: 80%; max-width: 800px;
            background: var(--glass); border: 1px solid var(--border); border-radius: 12px; 
            backdrop-filter: blur(14px); box-shadow: var(--glow-c); z-index: 200; overflow-y: auto; padding: 20px; 
            max-height: 80vh; transition: max-height 0.3s ease, opacity 0.3s ease; 
        }
        .holo-modal.minimized { max-height: 60px; overflow: hidden; opacity: 0.7; }
        .holo-header { 
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; 
        }
        .holo-title { font-size: 1.2rem; text-transform: uppercase; letter-spacing: 2px; }
        .minimize-btn { cursor: pointer; color: var(--cyan); font-size: 1.5rem; }
        .holo-content { font-size: 0.9rem; line-height: 1.4; }

        /* Close Button */
        .close { position: absolute; top: 10px; right: 10px; font-size: 24px; cursor: pointer; color: #ff3366; }

        /* 3D Canvas */
        canvas { position: fixed; top: 0; left: 0; z-index: 0; }
    </style>
</head>
<body>

<div id="rain-container"></div>

<div id="container">
    <!-- 3D Scene will be rendered here -->
</div>

<div id="icon-panel">
    <div class="icon" onclick="toggleHolo('land')">üåç</div>
    <div class="icon" onclick="toggleHolo('factory')">üè≠</div>
    <div class="icon" onclick="toggleHolo('warehouse')">üì¶</div>
    <div class="icon" onclick="toggleHolo('units')">üõ°Ô∏è</div>
    <div class="icon" onclick="toggleHolo('companies')">ü§ù</div>
</div>

<!-- Glass Holoframe Modals -->
<div id="land-holo" class="holo-modal">
    <div class="holo-header">
        <span class="holo-title">Land Acquisition & Preparation</span>
        <span class="minimize-btn" onclick="minimizeHolo('land')">-</span>
    </div>
    <span class="close" onclick="closeHolo('land')">&times;</span>
    <div class="holo-content">
        <p>Detailed Information: 80-acre farm outside Redwater, Alberta (Sturgeon County). Proximity to Hwy 28 for logistics. Land type: Agricultural/cultivated farmland, flat terrain suitable for development. Acquisition process: Engage real estate brokers like RE/MAX Real Estate Central Alberta or Marcel LeBlanc Real Estate Inc. Estimated purchase price: $250,000‚Äì$500,000 CAD ($3,500‚Äì$6,000/acre). Broker commission: 5‚Äì6% (~$15,000‚Äì$30,000). Additional: Survey/legal fees $5,000‚Äì$15,000; site clearing/gravel roads $10,000‚Äì$30,000. Rezoning from ag to industrial: Application to Sturgeon County Planning ($5,000‚Äì$10,000 fees + $20,000‚Äì$50,000 consultant reports). Timeline: 6‚Äì18 months. Environmental buffers: Retain 70+ acres as green zones. Total: $300,000‚Äì$600,000 CAD.</p>
    </div>
</div>

<div id="factory-holo" class="holo-modal">
    <div class="holo-header">
        <span class="holo-title">Production Factory</span>
        <span class="minimize-btn" onclick="minimizeHolo('factory')">-</span>
    </div>
    <span class="close" onclick="closeHolo('factory')">&times;</span>
    <div class="holo-content">
        <p>Detailed Information: 20,000 sq ft steel prefab building on 5‚Äì10 acres of the 80-acre site. Layout: Manufacturing bays (60% for CNC/welding/assembly of towers), offices/lunchroom (10%), material handling zones. Height: 20‚Äì25 ft eaves for cranes. Construction: Steel kit/shell $500,000‚Äì$900,000; full build (foundation, utilities, fit-out) $3,000,000‚Äì$5,000,000 CAD. Contractors: Alpha Construction Inc. or Whitson Contracting Ltd. Equipment: CNC plasma cutter ($50,000‚Äì$150,000), TIG welder ($5,000‚Äì$10,000), powder coating booth ($20,000‚Äì$50,000), hydraulic press brake ($30,000‚Äì$80,000), overhead crane ($20,000‚Äì$50,000). Total startup: $4,100,000‚Äì$7,100,000 CAD including land. Schematics: Site plan, floor plan (open clear-span), elevations (insulated metal panels), structural cross-sections (I-beams for snow loads).</p>
    </div>
</div>

<div id="warehouse-holo" class="holo-modal">
    <div class="holo-header">
        <span class="holo-title">Warehouse</span>
        <span class="minimize-btn" onclick="minimizeHolo('warehouse')">-</span>
    </div>
    <span class="close" onclick="closeHolo('warehouse')">&times;</span>
    <div class="holo-content">
        <p>Detailed Information: Integrated within the 20,000 sq ft facility (30% dedicated to storage: raw materials, filters, finished EcoTowers). Features: Racking systems for 1,200kg towers, loading docks (2‚Äì4 bays for trucks), climate-controlled zones for electronics. Built on same 80-acre property, adjacent to manufacturing for efficiency. Cost: Included in factory build (~$900,000‚Äì$1,500,000 allocation). Suppliers: Russel Metals for steel racks. Schematics: Floor plan shows storage zones with aisles for forklifts, site plan indicates yard space for overflow, elevations include dock doors, structural details for heavy-load flooring.</p>
    </div>
</div>

<div id="units-holo" class="holo-modal">
    <div class="holo-header">
        <span class="holo-title">Air Purifier Units</span>
        <span class="minimize-btn" onclick="minimizeHolo('units')">-</span>
    </div>
    <span class="close" onclick="closeHolo('units')">&times;</span>
    <div class="holo-content">
        <p>Detailed Information: 3M EcoTower specs: 7m height, 2.5m base diameter, 1,200kg. Materials: Aluminum alloy frame ($2,800), stainless panels ($800), HEPA filters/ionizer ($4,000), solar+battery ($14,000), electronics/fans ($2,300), weatherproof coating ($5,000), misc ($5,000). Per-unit cost: Materials $33,900, labor $3,600, machinery share $6,200, total ~$52,400 CAD. Parts list: 6x HEPA panels (MERV 16), 3x 500W fans, 10kWh Li-ion battery, sensors (PM2.5/CO2/VOC). Schematics: Overall cylinder design, filtration cross-section (pre-filter‚Üíionizer‚ÜíHEPA‚ÜíUV-C), exploded assembly (4 modular sections), electrical (solar wiring), structural frame (anchors/bracing). Production: 30,000 m¬≥/h capacity, ozone-free.</p>
    </div>
</div>

<div id="companies-holo" class="holo-modal">
    <div class="holo-header">
        <span class="holo-title">Companies Required</span>
        <span class="minimize-btn" onclick="minimizeHolo('companies')">-</span>
    </div>
    <span class="close" onclick="closeHolo('companies')">&times;</span>
    <div class="holo-content">
        <p>Detailed Information: Real Estate: RE/MAX Real Estate Central Alberta ($15k‚Äì$25k commission). Planning: MVH Urban Planning ($20k‚Äì$40k for rezoning). Construction: Alpha Construction Inc. ($3M‚Äì$4.5M build). Engineering: Arrow Engineering ($25k‚Äì$50k drawings). Machinery: Leavitt Machinery ($200k‚Äì$400k equipment). Materials: Russel Metals ($40k‚Äì$80k metals). Environmental: North Shore Consultants ($15k‚Äì$30k assessments). Utilities: EPCOR ($50k‚Äì$150k hookups). All Edmonton/Sturgeon-based for local efficiency. Total engagement: Aligns with $4.1M‚Äì$7.1M project cost.</p>
    </div>
</div>

<script type="importmap">
    { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
</script>

<script type="module">
    import * as THREE from 'three';

    // --- Setup ---
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.getElementById('container').appendChild(renderer.domElement);

    const loader = new THREE.TextureLoader();

    // --- Lighting ---
    const light = new THREE.PointLight(0xffffff, 100, 100);
    light.position.set(10, 10, 10);
    scene.add(light);
    scene.add(new THREE.AmbientLight(0x404040));

    // --- Ground (Farm Land) ---
    const groundGeom = new THREE.PlaneGeometry(100, 100);
    const groundMat = new THREE.MeshPhongMaterial({ color: 0x228B22 }); // Green field
    const ground = new THREE.Mesh(groundGeom, groundMat);
    ground.rotation.x = -Math.PI / 2;
    scene.add(ground);

    // --- Stages Models ---
    const stages = [];
    stages[0] = new THREE.Group(); // Empty land (just ground)

    // Stage 1: Site Prep (cleared area, fences)
    const stage1 = new THREE.Group();
    const clearedGeom = new THREE.PlaneGeometry(30, 50);
    const clearedMat = new THREE.MeshPhongMaterial({ color: 0x8B4513 }); // Dirt
    const cleared = new THREE.Mesh(clearedGeom, clearedMat);
    cleared.rotation.x = -Math.PI / 2;
    cleared.position.set(0, 0.01, 0);
    stage1.add(cleared);
    stages[1] = stage1;

    // Stage 2: Construction (frame)
    const stage2 = new THREE.Group();
    stage2.add(cleared.clone());
    const frameGeom = new THREE.BoxGeometry(20, 5, 40);
    const frameMat = new THREE.MeshPhongMaterial({ color: 0x808080, wireframe: true });
    const frame = new THREE.Mesh(frameGeom, frameMat);
    frame.position.set(0, 2.5, 0);
    stage2.add(frame);
    stages[2] = stage2;

    // Stage 3: Completed Facility
    const stage3 = new THREE.Group();
    stage3.add(cleared.clone());
    const buildingGeom = new THREE.BoxGeometry(20, 5, 40);
    const buildingMat = new THREE.MeshPhongMaterial({ color: 0xA9A9A9 });
    const building = new THREE.Mesh(buildingGeom, buildingMat);
    building.position.set(0, 2.5, 0);
    stage3.add(building);
    stages[3] = stage3;

    // Stage 4: Operational (with units/towers)
    const stage4 = new THREE.Group();
    stage4.add(building.clone());
    const towerGeom = new THREE.CylinderGeometry(0.5, 0.5, 3, 32);
    const towerMat = new THREE.MeshPhongMaterial({ color: 0x00d4ff });
    for (let i = 0; i < 5; i++) {
        const tower = new THREE.Mesh(towerGeom, towerMat);
        tower.position.set(-5 + i * 3, 1.5, -10);
        stage4.add(tower);
    }
    stages[4] = stage4;

    let currentStage = stages[0];
    scene.add(currentStage);

    // --- Camera ---
    camera.position.set(0, 10, 30);
    camera.lookAt(0, 0, 0);

    // --- Render Loop ---
    function animate() {
        requestAnimationFrame(animate);
        currentStage.rotation.y += 0.001;
        renderer.render(scene, camera);
    }
    animate();

    // --- Rain Effect ---
    function createRain() {
        const container = document.getElementById('rain-container');
        if (container.children.length > 0) return;
        for (let i = 0; i < 60; i++) {
            const drop = document.createElement('div');
            drop.className = 'drop';
            drop.style.left = Math.random() * 100 + 'vw';
            drop.style.animationDuration = (Math.random() * 0.6 + 0.8) + 's';
            drop.style.animationDelay = Math.random() * 3 + 's';
            container.appendChild(drop);
        }
    }
    createRain();

    // --- Holoframe Functions ---
    const holoStates = {}; // Track minimized state

    function toggleHolo(id) {
        const modal = document.getElementById(`${id}-holo`);
        if (modal.style.display === 'block') {
            closeHolo(id);
        } else {
            modal.style.display = 'block';
            holoStates[id] = false; // Not minimized
            modal.classList.remove('minimized');
        }
    }

    function minimizeHolo(id) {
        const modal = document.getElementById(`${id}-holo`);
        holoStates[id] = !holoStates[id];
        if (holoStates[id]) {
            modal.classList.add('minimized');
        } else {
            modal.classList.remove('minimized');
        }
    }

    function closeHolo(id) {
        const modal = document.getElementById(`${id}-holo`);
        modal.style.display = 'none';
        holoStates[id] = false;
    }

    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });
</script>
</body>
</html>
